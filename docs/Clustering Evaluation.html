

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Evaluating clustering algorithms &mdash; sensAI 0.0.5.dev0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The Coordinate Clustering Module" href="Intro%20to%20Coordinate%20Clustering.html" />
    <link rel="prev" title="sensAI - the Python library for sensible AI" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> sensAI
          

          
          </a>

          
            
            
              <div class="version">
                0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Guides and Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Evaluating clustering algorithms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Before-running-the-notebook">Before running the notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Evaluating-a-single-model">Evaluating a single model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Model-selection">Model selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Dealing-with-ground-truth-labels">Dealing with ground truth labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Supervised-parameter-estimation">Supervised parameter estimation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Intro%20to%20Coordinate%20Clustering.html">The Coordinate Clustering Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="Intro%20to%20sensAI.html">Lightning intro to sensAI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tracking%20Experiments.html">Tracking sensAI experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sensai/index.html">Modules</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">sensAI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Evaluating clustering algorithms</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Clustering Evaluation.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Evaluating-clustering-algorithms">
<h1>Evaluating clustering algorithms<a class="headerlink" href="#Evaluating-clustering-algorithms" title="Permalink to this headline">¶</a></h1>
<p>The present library contains utilities for evaluating different clustering algorithms (with or without ground truth labels). On top of the evaluation utilities there are classes for performing parameters sweeps and model selection. Here we give an overview of the most important functionality</p>
<div class="section" id="Before-running-the-notebook">
<h2>Before running the notebook<a class="headerlink" href="#Before-running-the-notebook" title="Permalink to this headline">¶</a></h2>
<p>Install the library and its dependencies with, if you haven’t done so already</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
<p>from the root directory. You can also execute this command directly in the notebook but will need to reload the kernel afterwards</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Note - this cell should be executed only once per session</span>
<span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2

<span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span>

<span class="c1"># in order to get the config, it is not part of the library</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s2">&quot;..&quot;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">DBSCAN</span>
<span class="kn">from</span> <span class="nn">hdbscan</span> <span class="kn">import</span> <span class="n">HDBSCAN</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gp</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">sensai.clustering.coordinate_clustering</span> <span class="kn">import</span> <span class="n">SKLearnCoordinateClustering</span>
<span class="kn">from</span> <span class="nn">sensai.hyperopt</span> <span class="kn">import</span> <span class="n">GridSearch</span>
<span class="kn">from</span> <span class="nn">sensai.evaluation.evaluator_clustering</span> <span class="kn">import</span> <span class="n">ClusteringModelSupervisedEvaluator</span><span class="p">,</span> \
    <span class="n">ClusteringModelUnsupervisedEvaluator</span>
<span class="kn">from</span> <span class="nn">sensai.evaluation.eval_stats</span> <span class="kn">import</span> <span class="n">ClusteringUnsupervisedEvalStats</span><span class="p">,</span> <span class="n">ClusteringSupervisedEvalStats</span><span class="p">,</span> \
    <span class="n">AdjustedMutualInfoScore</span>
<span class="kn">from</span> <span class="nn">sensai.evaluation.clustering_ground_truth</span> <span class="kn">import</span> <span class="n">PolygonAnnotatedCoordinates</span>

<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">get_config</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># loading data and config</span>
<span class="n">c</span>  <span class="o">=</span> <span class="n">get_config</span><span class="p">(</span><span class="n">reload</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sampleFile</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">datafile_path</span><span class="p">(</span><span class="s2">&quot;sample&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">RAW</span><span class="p">)</span> <span class="c1"># this can point to a directory or a shp/geojson file</span>
<span class="n">coordinatesDF</span> <span class="o">=</span> <span class="n">gp</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">sampleFile</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:config.__Configuration:Reading configuration from /home/runner/work/sensAI/sensAI/config.json
</pre></div></div>
</div>
</div>
<div class="section" id="Evaluating-a-single-model">
<h2>Evaluating a single model<a class="headerlink" href="#Evaluating-a-single-model" title="Permalink to this headline">¶</a></h2>
<p>For a single model that was already fitted, evaluation statistics can be extracted with <code class="docutils literal notranslate"><span class="pre">ClusteringEvalStats</span></code>, see the example below (the eval_stats object can also be used to retrieve evaluation results one by one)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dbscan</span> <span class="o">=</span> <span class="n">SKLearnCoordinateClustering</span><span class="p">(</span><span class="n">DBSCAN</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">min_samples</span><span class="o">=</span><span class="mi">20</span><span class="p">))</span>
<span class="n">dbscan</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">coordinatesDF</span><span class="p">)</span>
<span class="n">evalStats</span> <span class="o">=</span> <span class="n">ClusteringUnsupervisedEvalStats</span><span class="o">.</span><span class="n">fromModel</span><span class="p">(</span><span class="n">dbscan</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">evalStats</span><span class="o">.</span><span class="n">getAll</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">evalStats</span><span class="o">.</span><span class="n">clusterSizeDistribution</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 477 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.34s
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;CalinskiHarabaszScore&#39;: 189507.73108614382,
 &#39;DaviesBouldinScore&#39;: 0.4281783403733455,
 &#39;averageClusterSize&#39;: 57.36058700209644,
 &#39;clusterSizeStd&#39;: 102.89757968842169,
 &#39;maxClusterSize&#39;: 1983,
 &#39;medianClusterSize&#39;: 34.0,
 &#39;minClusterSize&#39;: 10,
 &#39;noiseClusterSize&#39;: 51421,
 &#39;numClusters&#39;: 477}
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/Clustering_Evaluation_5_2.png" src="_images/Clustering_Evaluation_5_2.png" />
</div>
</div>
</div>
<div class="section" id="Model-selection">
<h2>Model selection<a class="headerlink" href="#Model-selection" title="Permalink to this headline">¶</a></h2>
<p>For model selection we need to compare different (or differently parametrized) models that were trained on the same dataset. The <code class="docutils literal notranslate"><span class="pre">ClusteringEvaluator</span></code> abstraction was designed with this goal in mind. The evaluator can be used to obtain evaluation statistics for different models that are guaranteed to be comparable with each other (always computed by the same object in the same way). Here an example comparing hdbscan and dbscan performances</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">hdbscan</span> <span class="o">=</span> <span class="n">SKLearnCoordinateClustering</span><span class="p">(</span><span class="n">HDBSCAN</span><span class="p">(</span><span class="n">min_cluster_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">min_samples</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">cluster_selection_epsilon</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>

<span class="n">modelEvaluator</span> <span class="o">=</span> <span class="n">ClusteringModelUnsupervisedEvaluator</span><span class="p">(</span><span class="n">coordinatesDF</span><span class="p">)</span>

<span class="n">dbscanEvalStats</span> <span class="o">=</span> <span class="n">modelEvaluator</span><span class="o">.</span><span class="n">evalModel</span><span class="p">(</span><span class="n">dbscan</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># dbscan was already fitted on this data</span>
<span class="n">hdbscanEvalStats</span> <span class="o">=</span> <span class="n">modelEvaluator</span><span class="o">.</span><span class="n">evalModel</span><span class="p">(</span><span class="n">hdbscan</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 134 clusters
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;dbscan_performance: </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">dbscanEvalStats</span><span class="o">.</span><span class="n">getAll</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hdbscan_performance: </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">hdbscanEvalStats</span><span class="o">.</span><span class="n">getAll</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dbscan_performance:

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:sensai.util.tracking:Finished execution of getAll in 0.45s
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;CalinskiHarabaszScore&#39;: 189507.73108614382,
 &#39;DaviesBouldinScore&#39;: 0.4281783403733455,
 &#39;averageClusterSize&#39;: 57.36058700209644,
 &#39;clusterSizeStd&#39;: 102.89757968842169,
 &#39;maxClusterSize&#39;: 1983,
 &#39;medianClusterSize&#39;: 34.0,
 &#39;minClusterSize&#39;: 10,
 &#39;noiseClusterSize&#39;: 51421,
 &#39;numClusters&#39;: 477}

hdbscan_performance:

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:sensai.util.tracking:Finished execution of getAll in 0.30s
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;CalinskiHarabaszScore&#39;: 12813.60750355356,
 &#39;DaviesBouldinScore&#39;: 0.8143041883077772,
 &#39;averageClusterSize&#39;: 473.13432835820896,
 &#39;clusterSizeStd&#39;: 1071.7603234450864,
 &#39;maxClusterSize&#39;: 10226,
 &#39;medianClusterSize&#39;: 231.0,
 &#39;minClusterSize&#39;: 101,
 &#39;noiseClusterSize&#39;: 15382,
 &#39;numClusters&#39;: 134}
</pre></div></div>
</div>
<p>One of the main purposes of evaluators is to be used within classes that perform a parameter sweep, e.g. a <code class="docutils literal notranslate"><span class="pre">GridSearch</span></code>. All such objects return a data frame and (optionally but recommended!) persist all evaluation results in a csv.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">parameterOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;min_samples&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span>
    <span class="s2">&quot;eps&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># for running the grid search in multiple processes, all objects need to be picklable.</span>
<span class="c1"># Therefore we pass a named function as model factory instead of a lambda</span>
<span class="k">def</span> <span class="nf">dbscanFactory</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">SKLearnCoordinateClustering</span><span class="p">(</span><span class="n">DBSCAN</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>

<span class="n">dbscanGridSearch</span> <span class="o">=</span> <span class="n">GridSearch</span><span class="p">(</span><span class="n">dbscanFactory</span><span class="p">,</span> <span class="n">parameterOptions</span><span class="p">,</span> <span class="n">csvResultsPath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">temp</span><span class="p">,</span> <span class="s2">&quot;dbscanGridSearchCsv&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:sensai.hyperopt:Created GridSearch object for 4 parameter combinations
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># the results of the grid-search are saved as csv under the path provided above</span>
<span class="n">resultDf</span> <span class="o">=</span> <span class="n">dbscanGridSearch</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">modelEvaluator</span><span class="p">,</span> <span class="n">sortColumnName</span><span class="o">=</span><span class="s2">&quot;numClusters&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">resultDf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 10, &#39;eps&#39;: 50}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 234 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.09s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 8.30s
INFO:sensai.hyperopt:Updated grid search result:
  numClusters  CalinskiHarabaszScore  DaviesBouldinScore  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples eps
0         234          438386.535007            0.293545           36.012821       90.293419           1288              7               17.0            70355  SKLearnCoordinateClustering          10  50
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 10, &#39;eps&#39;: 150}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 1057 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.77s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 7.25s
INFO:sensai.hyperopt:Updated grid search result:
  numClusters  CalinskiHarabaszScore  DaviesBouldinScore  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0        1057           28889.286349            0.602208           56.362346      134.804446           2135              4               22.0            19207  SKLearnCoordinateClustering          10  150
1         234          438386.535007            0.293545           36.012821       90.293419           1288              7               17.0            70355  SKLearnCoordinateClustering          10   50
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 20, &#39;eps&#39;: 50}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 36 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.01s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 6.22s
INFO:sensai.hyperopt:Updated grid search result:
  numClusters  CalinskiHarabaszScore  DaviesBouldinScore  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0        1057           2.888929e+04            0.602208           56.362346      134.804446           2135              4               22.0            19207  SKLearnCoordinateClustering          10  150
1         234           4.383865e+05            0.293545           36.012821       90.293419           1288              7               17.0            70355  SKLearnCoordinateClustering          10   50
2          36           1.646224e+06            0.278540           65.777778       97.948998            568             20               34.0            76414  SKLearnCoordinateClustering          20   50
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 20, &#39;eps&#39;: 150}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 477 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.24s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 6.56s
INFO:sensai.hyperopt:Updated grid search result:
  numClusters  CalinskiHarabaszScore  DaviesBouldinScore  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0        1057           2.888929e+04            0.602208           56.362346      134.804446           2135              4               22.0            19207  SKLearnCoordinateClustering          10  150
1         477           1.895077e+05            0.428178           57.360587      102.897580           1983             10               34.0            51421  SKLearnCoordinateClustering          20  150
2         234           4.383865e+05            0.293545           36.012821       90.293419           1288              7               17.0            70355  SKLearnCoordinateClustering          10   50
3          36           1.646224e+06            0.278540           65.777778       97.948998            568             20               34.0            76414  SKLearnCoordinateClustering          20   50
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>numClusters</th>
      <th>CalinskiHarabaszScore</th>
      <th>DaviesBouldinScore</th>
      <th>averageClusterSize</th>
      <th>clusterSizeStd</th>
      <th>maxClusterSize</th>
      <th>minClusterSize</th>
      <th>medianClusterSize</th>
      <th>noiseClusterSize</th>
      <th>str(model)</th>
      <th>min_samples</th>
      <th>eps</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1057</td>
      <td>2.888929e+04</td>
      <td>0.602208</td>
      <td>56.362346</td>
      <td>134.804446</td>
      <td>2135</td>
      <td>4</td>
      <td>22.0</td>
      <td>19207</td>
      <td>SKLearnCoordinateClustering</td>
      <td>10</td>
      <td>150</td>
    </tr>
    <tr>
      <th>1</th>
      <td>477</td>
      <td>1.895077e+05</td>
      <td>0.428178</td>
      <td>57.360587</td>
      <td>102.897580</td>
      <td>1983</td>
      <td>10</td>
      <td>34.0</td>
      <td>51421</td>
      <td>SKLearnCoordinateClustering</td>
      <td>20</td>
      <td>150</td>
    </tr>
    <tr>
      <th>2</th>
      <td>234</td>
      <td>4.383865e+05</td>
      <td>0.293545</td>
      <td>36.012821</td>
      <td>90.293419</td>
      <td>1288</td>
      <td>7</td>
      <td>17.0</td>
      <td>70355</td>
      <td>SKLearnCoordinateClustering</td>
      <td>10</td>
      <td>50</td>
    </tr>
    <tr>
      <th>3</th>
      <td>36</td>
      <td>1.646224e+06</td>
      <td>0.278540</td>
      <td>65.777778</td>
      <td>97.948998</td>
      <td>568</td>
      <td>20</td>
      <td>34.0</td>
      <td>76414</td>
      <td>SKLearnCoordinateClustering</td>
      <td>20</td>
      <td>50</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>The resulting data frame can be used to visualize the results through standard techniques, e.g. pivoting and heatmaps</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;calinskiHarabaszScores&quot;</span><span class="p">)</span>
<span class="n">chScoreHeatmap</span> <span class="o">=</span> <span class="n">resultDf</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;min_samples&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;CalinskiHarabaszScore&quot;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">chScoreHeatmap</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
calinskiHarabaszScores
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/Clustering_Evaluation_13_1.png" src="_images/Clustering_Evaluation_13_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;daviesBouldinScores&quot;</span><span class="p">)</span>
<span class="n">chScoreHeatmap</span> <span class="o">=</span> <span class="n">resultDf</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;min_samples&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;DaviesBouldinScore&quot;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">chScoreHeatmap</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">rocket_r</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
daviesBouldinScores
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/Clustering_Evaluation_14_1.png" src="_images/Clustering_Evaluation_14_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;numClusters&quot;</span><span class="p">)</span>
<span class="n">numClustersHeatmap</span> <span class="o">=</span> <span class="n">resultDf</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;min_samples&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;numClusters&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">numClustersHeatmap</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># something goes wrong with the datatype here, maybe b/c of zero clusters</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
numClusters
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/Clustering_Evaluation_15_1.png" src="_images/Clustering_Evaluation_15_1.png" />
</div>
</div>
</div>
<div class="section" id="Dealing-with-ground-truth-labels">
<h2>Dealing with ground truth labels<a class="headerlink" href="#Dealing-with-ground-truth-labels" title="Permalink to this headline">¶</a></h2>
<p>The evaluation classes can take ground truth labels for all coordinates and use them for calculating related metrics. However, such labels are typically hard to come by, especially if the coordinates cover a large area. Therefore the library includes utilities for extracting labels from ground truth provided in form of <strong>cluster polygons in a selected region</strong>. The central class for dealing with this kind of data is <code class="docutils literal notranslate"><span class="pre">ground_truth.PolygonAnnotatedCoordinates</span></code>, see examples below.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># The polygons can be read directly from a file, see the documentation for more details</span>
<span class="n">groundTruthClusters</span> <span class="o">=</span> <span class="n">PolygonAnnotatedCoordinates</span><span class="p">(</span><span class="n">coordinatesDF</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">datafile_path</span><span class="p">(</span><span class="s2">&quot;sample&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">GROUND_TRUTH</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>As usual, the object has methods for plotting and exporting to geodata frames. These can be very useful for inspecting the provided data</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">groundTruthClusters</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">markersize</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;plasma&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">groundTruthClusters</span><span class="o">.</span><span class="n">toGeoDF</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/Clustering_Evaluation_19_0.png" src="_images/Clustering_Evaluation_19_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry</th>
    </tr>
    <tr>
      <th>identifier</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>-1</th>
      <td>MULTIPOINT (4376132.864 1166694.757, 4376133.7...</td>
    </tr>
    <tr>
      <th>0</th>
      <td>MULTIPOINT (4407503.519 1182004.668, 4407516.7...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>MULTIPOINT (4377765.260 1205034.312, 4377779.2...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>MULTIPOINT (4379552.328 1188520.932, 4379560.1...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>MULTIPOINT (4376405.982 1183903.847, 4376421.3...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>We can extract the coordinates and labels for the annotated region and use them in evaluation. In the following we will train our own adaption of DBSCAN, namely <code class="docutils literal notranslate"><span class="pre">boundedDBSCAN</span></code> on datapoints in the ground truth region and evaluate the results against the true labels</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">boundedDbscan</span> <span class="o">=</span> <span class="n">SKLearnCoordinateClustering</span><span class="p">(</span><span class="n">DBSCAN</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">min_samples</span><span class="o">=</span><span class="mi">20</span><span class="p">),</span> <span class="n">minClusterSize</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">groundTruthCoordinates</span><span class="p">,</span> <span class="n">groundTruthLabels</span> <span class="o">=</span> <span class="n">groundTruthClusters</span><span class="o">.</span><span class="n">getCoordinatesLabels</span><span class="p">()</span>
<span class="n">supervisedEvaluator</span> <span class="o">=</span> <span class="n">ClusteringModelSupervisedEvaluator</span><span class="p">(</span><span class="n">groundTruthCoordinates</span><span class="p">,</span> <span class="n">trueLabels</span><span class="o">=</span><span class="n">groundTruthLabels</span><span class="p">)</span>
<span class="n">supervisedEvalStats</span> <span class="o">=</span> <span class="n">supervisedEvaluator</span><span class="o">.</span><span class="n">evalModel</span><span class="p">(</span><span class="n">boundedDbscan</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Supervised evaluation metrics of bounded dbscan:&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">supervisedEvalStats</span><span class="o">.</span><span class="n">getAll</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 57 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.09s
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Supervised evaluation metrics of bounded dbscan:
{&#39;AdjustedMutualInfoScore&#39;: 0.6497595011750351,
 &#39;AdjustedRandScore&#39;: 0.17987036763356976,
 &#39;FowlkesMallowsScore&#39;: 0.27503572733470316,
 &#39;VMeasureScore&#39;: 0.661727751698087,
 &#39;averageClusterSize&#39;: 197.94736842105263,
 &#39;clusterSizeStd&#39;: 252.18173765930052,
 &#39;maxClusterSize&#39;: 1983,
 &#39;medianClusterSize&#39;: 132.0,
 &#39;minClusterSize&#39;: 100,
 &#39;noiseClusterSize&#39;: 67499,
 &#39;numClusters&#39;: 57}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unsupervised evaluation metrics of bounded dbscan:&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">ClusteringUnsupervisedEvalStats</span><span class="p">(</span><span class="n">groundTruthCoordinates</span><span class="p">,</span> <span class="n">groundTruthLabels</span><span class="p">)</span><span class="o">.</span><span class="n">getAll</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unsupervised evaluation metrics of annotated data&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">ClusteringUnsupervisedEvalStats</span><span class="o">.</span><span class="n">fromModel</span><span class="p">(</span><span class="n">boundedDbscan</span><span class="p">)</span><span class="o">.</span><span class="n">getAll</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:sensai.util.tracking:Finished execution of getAll in 0.02s
INFO:sensai.util.tracking:Finished execution of getAll in 0.03s
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Unsupervised evaluation metrics of bounded dbscan:
{&#39;CalinskiHarabaszScore&#39;: 196718.30364210886,
 &#39;DaviesBouldinScore&#39;: 0.2807623964112674,
 &#39;averageClusterSize&#39;: 179.5744680851064,
 &#39;clusterSizeStd&#39;: 98.98522234019755,
 &#39;maxClusterSize&#39;: 499,
 &#39;medianClusterSize&#39;: 143.0,
 &#39;minClusterSize&#39;: 29,
 &#39;noiseClusterSize&#39;: 70342,
 &#39;numClusters&#39;: 47}

Unsupervised evaluation metrics of annotated data
{&#39;CalinskiHarabaszScore&#39;: 313728.9671149488,
 &#39;DaviesBouldinScore&#39;: 0.248334574556368,
 &#39;averageClusterSize&#39;: 197.94736842105263,
 &#39;clusterSizeStd&#39;: 252.18173765930052,
 &#39;maxClusterSize&#39;: 1983,
 &#39;medianClusterSize&#39;: 132.0,
 &#39;minClusterSize&#39;: 100,
 &#39;noiseClusterSize&#39;: 67499,
 &#39;numClusters&#39;: 57}
</pre></div></div>
</div>
<p>The bounded dbscan is performing quite OK with the given parameters, although we see that it segregates clusters too much and has a general tendency towards smaller clusters. These tendencies can be seen visually by comparing the ground truth and the bounded dbscan cluster plots</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">groundTruthClusters</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">markersize</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;plasma&quot;</span><span class="p">,</span> <span class="n">includeNoise</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">boundedDbscan</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">markersize</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">includeNoise</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:sensai.clustering.base.clustering:Processed 0% of clusters
INFO:sensai.clustering.base.clustering:Processed 5% of clusters
INFO:sensai.clustering.base.clustering:Processed 10% of clusters
INFO:sensai.clustering.base.clustering:Processed 15% of clusters
INFO:sensai.util.tracking:Finished execution of toGeoDF in 1.59s
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/Clustering_Evaluation_24_1.png" src="_images/Clustering_Evaluation_24_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/Clustering_Evaluation_24_2.png" src="_images/Clustering_Evaluation_24_2.png" />
</div>
</div>
</div>
<div class="section" id="Supervised-parameter-estimation">
<h2>Supervised parameter estimation<a class="headerlink" href="#Supervised-parameter-estimation" title="Permalink to this headline">¶</a></h2>
<p>We can now bring everything together by running a grid search and evaluating against ground truth. Very little code is needed for that, so we will write it entirely in the cell below</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">parameterOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;min_samples&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">],</span>
    <span class="s2">&quot;eps&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">140</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">160</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">supervisedGridSearch</span> <span class="o">=</span> <span class="n">GridSearch</span><span class="p">(</span><span class="n">dbscanFactory</span><span class="p">,</span> <span class="n">parameterOptions</span><span class="p">,</span>
                                           <span class="n">csvResultsPath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">temp</span><span class="p">,</span> <span class="s2">&quot;bounded_dbscan_grid_search.csv&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:sensai.hyperopt:Created GridSearch object for 9 parameter combinations
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># we will sort the results by mutual information store</span>
<span class="n">supervisedResultDf</span> <span class="o">=</span> <span class="n">supervisedGridSearch</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">supervisedEvaluator</span><span class="p">,</span> <span class="n">sortColumnName</span><span class="o">=</span><span class="n">AdjustedMutualInfoScore</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                              <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">supervisedResultDf</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 19, &#39;eps&#39;: 140}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 462 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.31s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 1.01s
INFO:sensai.hyperopt:Updated grid search result:
   AdjustedMutualInfoScore  VMeasureScore  FowlkesMallowsScore  AdjustedRandScore numClusters  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0                 0.337171       0.391642             0.088137           0.003466         462           53.848485      102.862824           1966              7               32.0            53904  SKLearnCoordinateClustering          19  140
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 19, &#39;eps&#39;: 150}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 530 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.37s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 1.18s
INFO:sensai.hyperopt:Updated grid search result:
   AdjustedMutualInfoScore  VMeasureScore  FowlkesMallowsScore  AdjustedRandScore numClusters  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0                 0.337171       0.391642             0.088137           0.003466         462           53.848485      102.862824           1966              7               32.0            53904  SKLearnCoordinateClustering          19  140
1                 0.305778       0.359296             0.082667           0.003835         530           56.394340      100.174928           1988             14               33.0            48893  SKLearnCoordinateClustering          19  150
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 19, &#39;eps&#39;: 160}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 569 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.41s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 1.15s
INFO:sensai.hyperopt:Updated grid search result:
   AdjustedMutualInfoScore  VMeasureScore  FowlkesMallowsScore  AdjustedRandScore numClusters  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0                 0.337171       0.391642             0.088137           0.003466         462           53.848485      102.862824           1966              7               32.0            53904  SKLearnCoordinateClustering          19  140
1                 0.305778       0.359296             0.082667           0.003835         530           56.394340      100.174928           1988             14               33.0            48893  SKLearnCoordinateClustering          19  150
2                 0.275955       0.326911             0.077053           0.002975         569           61.312830      103.038054           2023             12               36.0            43895  SKLearnCoordinateClustering          19  160
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 20, &#39;eps&#39;: 140}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 406 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.28s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 0.97s
INFO:sensai.hyperopt:Updated grid search result:
   AdjustedMutualInfoScore  VMeasureScore  FowlkesMallowsScore  AdjustedRandScore numClusters  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0                 0.359844       0.412557             0.094061           0.004357         406           55.945813      108.367133           1965             14               32.5            56068  SKLearnCoordinateClustering          20  140
1                 0.337171       0.391642             0.088137           0.003466         462           53.848485      102.862824           1966              7               32.0            53904  SKLearnCoordinateClustering          19  140
2                 0.305778       0.359296             0.082667           0.003835         530           56.394340      100.174928           1988             14               33.0            48893  SKLearnCoordinateClustering          19  150
3                 0.275955       0.326911             0.077053           0.002975         569           61.312830      103.038054           2023             12               36.0            43895  SKLearnCoordinateClustering          19  160
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 20, &#39;eps&#39;: 150}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 477 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.35s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 1.07s
INFO:sensai.hyperopt:Updated grid search result:
   AdjustedMutualInfoScore  VMeasureScore  FowlkesMallowsScore  AdjustedRandScore numClusters  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0                 0.359844       0.412557             0.094061           0.004357         406           55.945813      108.367133           1965             14               32.5            56068  SKLearnCoordinateClustering          20  140
1                 0.337171       0.391642             0.088137           0.003466         462           53.848485      102.862824           1966              7               32.0            53904  SKLearnCoordinateClustering          19  140
2                 0.325457       0.378548             0.087130           0.004546         477           57.360587      102.897111           1983             10               34.0            51421  SKLearnCoordinateClustering          20  150
3                 0.305778       0.359296             0.082667           0.003835         530           56.394340      100.174928           1988             14               33.0            48893  SKLearnCoordinateClustering          19  150
4                 0.275955       0.326911             0.077053           0.002975         569           61.312830      103.038054           2023             12               36.0            43895  SKLearnCoordinateClustering          19  160
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 20, &#39;eps&#39;: 160}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 528 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.37s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 1.09s
INFO:sensai.hyperopt:Updated grid search result:
   AdjustedMutualInfoScore  VMeasureScore  FowlkesMallowsScore  AdjustedRandScore numClusters  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0                 0.359844       0.412557             0.094061           0.004357         406           55.945813      108.367133           1965             14               32.5            56068  SKLearnCoordinateClustering          20  140
1                 0.337171       0.391642             0.088137           0.003466         462           53.848485      102.862824           1966              7               32.0            53904  SKLearnCoordinateClustering          19  140
2                 0.325457       0.378548             0.087130           0.004546         477           57.360587      102.897111           1983             10               34.0            51421  SKLearnCoordinateClustering          20  150
3                 0.305778       0.359296             0.082667           0.003835         530           56.394340      100.174928           1988             14               33.0            48893  SKLearnCoordinateClustering          19  150
4                 0.294439       0.345625             0.081099           0.003768         528           61.195076      103.120378           2006             12               37.0            46471  SKLearnCoordinateClustering          20  160
5                 0.275955       0.326911             0.077053           0.002975         569           61.312830      103.038054           2023             12               36.0            43895  SKLearnCoordinateClustering          19  160
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 21, &#39;eps&#39;: 140}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 356 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.25s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 0.94s
INFO:sensai.hyperopt:Updated grid search result:
   AdjustedMutualInfoScore  VMeasureScore  FowlkesMallowsScore  AdjustedRandScore numClusters  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0                 0.382680       0.433131             0.099087           0.004253         356           57.724719      114.153418           1958              8               33.0            58232  SKLearnCoordinateClustering          21  140
1                 0.359844       0.412557             0.094061           0.004357         406           55.945813      108.367133           1965             14               32.5            56068  SKLearnCoordinateClustering          20  140
2                 0.337171       0.391642             0.088137           0.003466         462           53.848485      102.862824           1966              7               32.0            53904  SKLearnCoordinateClustering          19  140
3                 0.325457       0.378548             0.087130           0.004546         477           57.360587      102.897111           1983             10               34.0            51421  SKLearnCoordinateClustering          20  150
4                 0.305778       0.359296             0.082667           0.003835         530           56.394340      100.174928           1988             14               33.0            48893  SKLearnCoordinateClustering          19  150
5                 0.294439       0.345625             0.081099           0.003768         528           61.195076      103.120378           2006             12               37.0            46471  SKLearnCoordinateClustering          20  160
6                 0.275955       0.326911             0.077053           0.002975         569           61.312830      103.038054           2023             12               36.0            43895  SKLearnCoordinateClustering          19  160
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 21, &#39;eps&#39;: 150}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 433 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.30s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 1.09s
INFO:sensai.hyperopt:Updated grid search result:
   AdjustedMutualInfoScore  VMeasureScore  FowlkesMallowsScore  AdjustedRandScore numClusters  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0                 0.382680       0.433131             0.099087           0.004253         356           57.724719      114.153418           1958              8               33.0            58232  SKLearnCoordinateClustering          21  140
1                 0.359844       0.412557             0.094061           0.004357         406           55.945813      108.367133           1965             14               32.5            56068  SKLearnCoordinateClustering          20  140
2                 0.344340       0.396441             0.091865           0.005319         433           58.344111      106.779193           1980             12               34.0            53519  SKLearnCoordinateClustering          21  150
3                 0.337171       0.391642             0.088137           0.003466         462           53.848485      102.862824           1966              7               32.0            53904  SKLearnCoordinateClustering          19  140
4                 0.325457       0.378548             0.087130           0.004546         477           57.360587      102.897111           1983             10               34.0            51421  SKLearnCoordinateClustering          20  150
5                 0.305778       0.359296             0.082667           0.003835         530           56.394340      100.174928           1988             14               33.0            48893  SKLearnCoordinateClustering          19  150
6                 0.294439       0.345625             0.081099           0.003768         528           61.195076      103.120378           2006             12               37.0            46471  SKLearnCoordinateClustering          20  160
7                 0.275955       0.326911             0.077053           0.002975         569           61.312830      103.038054           2023             12               36.0            43895  SKLearnCoordinateClustering          19  160
INFO:sensai.hyperopt.GridSearch:Evaluating {&#39;min_samples&#39;: 21, &#39;eps&#39;: 160}
INFO:sensai.clustering.base.clustering:Fitting SKLearnCoordinateClustering to 78782 coordinate datapoints.
INFO:sensai.clustering.base.clustering:SKLearnCoordinateClustering found 481 clusters
INFO:sensai.util.tracking:Finished execution of getAll in 0.38s
INFO:sensai.util.tracking:Finished execution of _computeMetrics in 1.11s
INFO:sensai.hyperopt:Updated grid search result:
   AdjustedMutualInfoScore  VMeasureScore  FowlkesMallowsScore  AdjustedRandScore numClusters  averageClusterSize  clusterSizeStd maxClusterSize minClusterSize  medianClusterSize noiseClusterSize                   str(model) min_samples  eps
0                 0.382680       0.433131             0.099087           0.004253         356           57.724719      114.153418           1958              8               33.0            58232  SKLearnCoordinateClustering          21  140
1                 0.359844       0.412557             0.094061           0.004357         406           55.945813      108.367133           1965             14               32.5            56068  SKLearnCoordinateClustering          20  140
2                 0.344340       0.396441             0.091865           0.005319         433           58.344111      106.779193           1980             12               34.0            53519  SKLearnCoordinateClustering          21  150
3                 0.337171       0.391642             0.088137           0.003466         462           53.848485      102.862824           1966              7               32.0            53904  SKLearnCoordinateClustering          19  140
4                 0.325457       0.378548             0.087130           0.004546         477           57.360587      102.897111           1983             10               34.0            51421  SKLearnCoordinateClustering          20  150
5                 0.314100       0.364825             0.085829           0.004605         481           62.022869      105.878767           2005             12               37.0            48949  SKLearnCoordinateClustering          21  160
6                 0.305778       0.359296             0.082667           0.003835         530           56.394340      100.174928           1988             14               33.0            48893  SKLearnCoordinateClustering          19  150
7                 0.294439       0.345625             0.081099           0.003768         528           61.195076      103.120378           2006             12               37.0            46471  SKLearnCoordinateClustering          20  160
8                 0.275955       0.326911             0.077053           0.002975         569           61.312830      103.038054           2023             12               36.0            43895  SKLearnCoordinateClustering          19  160
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AdjustedMutualInfoScore</th>
      <th>VMeasureScore</th>
      <th>FowlkesMallowsScore</th>
      <th>AdjustedRandScore</th>
      <th>numClusters</th>
      <th>averageClusterSize</th>
      <th>clusterSizeStd</th>
      <th>maxClusterSize</th>
      <th>minClusterSize</th>
      <th>medianClusterSize</th>
      <th>noiseClusterSize</th>
      <th>str(model)</th>
      <th>min_samples</th>
      <th>eps</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.382680</td>
      <td>0.433131</td>
      <td>0.099087</td>
      <td>0.004253</td>
      <td>356</td>
      <td>57.724719</td>
      <td>114.153418</td>
      <td>1958</td>
      <td>8</td>
      <td>33.0</td>
      <td>58232</td>
      <td>SKLearnCoordinateClustering</td>
      <td>21</td>
      <td>140</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.359844</td>
      <td>0.412557</td>
      <td>0.094061</td>
      <td>0.004357</td>
      <td>406</td>
      <td>55.945813</td>
      <td>108.367133</td>
      <td>1965</td>
      <td>14</td>
      <td>32.5</td>
      <td>56068</td>
      <td>SKLearnCoordinateClustering</td>
      <td>20</td>
      <td>140</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.344340</td>
      <td>0.396441</td>
      <td>0.091865</td>
      <td>0.005319</td>
      <td>433</td>
      <td>58.344111</td>
      <td>106.779193</td>
      <td>1980</td>
      <td>12</td>
      <td>34.0</td>
      <td>53519</td>
      <td>SKLearnCoordinateClustering</td>
      <td>21</td>
      <td>150</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.337171</td>
      <td>0.391642</td>
      <td>0.088137</td>
      <td>0.003466</td>
      <td>462</td>
      <td>53.848485</td>
      <td>102.862824</td>
      <td>1966</td>
      <td>7</td>
      <td>32.0</td>
      <td>53904</td>
      <td>SKLearnCoordinateClustering</td>
      <td>19</td>
      <td>140</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.325457</td>
      <td>0.378548</td>
      <td>0.087130</td>
      <td>0.004546</td>
      <td>477</td>
      <td>57.360587</td>
      <td>102.897111</td>
      <td>1983</td>
      <td>10</td>
      <td>34.0</td>
      <td>51421</td>
      <td>SKLearnCoordinateClustering</td>
      <td>20</td>
      <td>150</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.314100</td>
      <td>0.364825</td>
      <td>0.085829</td>
      <td>0.004605</td>
      <td>481</td>
      <td>62.022869</td>
      <td>105.878767</td>
      <td>2005</td>
      <td>12</td>
      <td>37.0</td>
      <td>48949</td>
      <td>SKLearnCoordinateClustering</td>
      <td>21</td>
      <td>160</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.305778</td>
      <td>0.359296</td>
      <td>0.082667</td>
      <td>0.003835</td>
      <td>530</td>
      <td>56.394340</td>
      <td>100.174928</td>
      <td>1988</td>
      <td>14</td>
      <td>33.0</td>
      <td>48893</td>
      <td>SKLearnCoordinateClustering</td>
      <td>19</td>
      <td>150</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.294439</td>
      <td>0.345625</td>
      <td>0.081099</td>
      <td>0.003768</td>
      <td>528</td>
      <td>61.195076</td>
      <td>103.120378</td>
      <td>2006</td>
      <td>12</td>
      <td>37.0</td>
      <td>46471</td>
      <td>SKLearnCoordinateClustering</td>
      <td>20</td>
      <td>160</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.275955</td>
      <td>0.326911</td>
      <td>0.077053</td>
      <td>0.002975</td>
      <td>569</td>
      <td>61.312830</td>
      <td>103.038054</td>
      <td>2023</td>
      <td>12</td>
      <td>36.0</td>
      <td>43895</td>
      <td>SKLearnCoordinateClustering</td>
      <td>19</td>
      <td>160</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>It seems like we were lucky to already have picked the optimal parameters for the dbscan above. It is also interesting to notice that the supervised scores are in stark disagreement with the unsupervised ones</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Intro%20to%20Coordinate%20Clustering.html" class="btn btn-neutral float-right" title="The Coordinate Clustering Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="sensAI - the Python library for sensible AI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>